use std::{
    io::{Write, stdout},
    thread::sleep,
    time::Duration,
};

fn main() {
    let mut grid: Vec<Vec<char>> = TEST_INPUT
        .split("\n")
        .collect::<Vec<&str>>()
        .iter()
        .map(|line| line.chars().collect::<Vec<char>>())
        .collect();
    for y in 0..grid.len() {
        for x in 0..grid[0].len() {
            grid[y][x] = '|';
            sleep(Duration::from_millis(100));
            print_grid(&grid);
        }
    }
}

fn print_grid(grid: &Vec<Vec<char>>) {
    print!("{esc}[2J{esc}[1;1H", esc = 27 as char);
    //print!("{}[2J", 27 as char);
    for y in 0..grid.len() {
        for x in 0..grid[0].len() {
            print!("{}", grid[y][x]);
        }
        println!();
    }
    //let _ = stdout().flush();
}

fn _day_4_pt_1() {
    let grid: Vec<Vec<char>> = INPUT
        .split("\n")
        .collect::<Vec<&str>>()
        .iter()
        .map(|line| line.chars().collect::<Vec<char>>())
        .collect();

    let mut splitter_count = 0;
    let mut skipped_splitter_count = 0;
    for y in 0..grid.len() {
        for x in 0..grid[0].len() {
            let char = grid[y][x];
            if char != '^' {
                continue;
            }
            splitter_count += 1;
            let mut row = y - 1;
            let column_left = x - 1;
            let column_mid = x;
            let column_right = x + 1;
            while row > 0 {
                if grid[row][column_mid] == '^' {
                    skipped_splitter_count += 1;
                    break;
                }
                if grid[row][column_left] == '^' || grid[row][column_right] == '^' {
                    break;
                }
                row -= 1;
            }
        }
    }
    println!("count = {:?}", splitter_count - skipped_splitter_count);
}

const TEST_INPUT: &str = ".......S.......
...............
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............";

const INPUT: &str = "......................................................................S......................................................................
.............................................................................................................................................
......................................................................^......................................................................
.............................................................................................................................................
.....................................................................^.^.....................................................................
.............................................................................................................................................
....................................................................^.^.^....................................................................
.............................................................................................................................................
...................................................................^...^.^...................................................................
.............................................................................................................................................
..................................................................^.^.....^..................................................................
.............................................................................................................................................
.................................................................^.^...^.^.^.................................................................
.............................................................................................................................................
................................................................^...^.^.^.^.^................................................................
.............................................................................................................................................
...............................................................^.^...^.....^.^...............................................................
.............................................................................................................................................
..............................................................^.^.^.^.^...^.^.^..............................................................
.............................................................................................................................................
.............................................................^...^.^...^.......^.............................................................
.............................................................................................................................................
............................................................^.^.^.^.^.^...^.^.^.^............................................................
.............................................................................................................................................
...........................................................^.^.^.^.^.^...^.^...^.^...........................................................
.............................................................................................................................................
..........................................................^.......^...^.^.^.^.^.^.^..........................................................
.............................................................................................................................................
.........................................................^...^...^.....^...^.......^.........................................................
.............................................................................................................................................
........................................................^...^.^.^.^.^...^.^.^.^.^...^........................................................
.............................................................................................................................................
.......................................................^.....^.....^.^.....^.^.^.^...^.......................................................
.............................................................................................................................................
......................................................^.^.^.....^.^.^...^...^...^...^.^......................................................
.............................................................................................................................................
.....................................................^.^.^.^.^...^.^.....^.^.^.^.^.^.^.^.....................................................
.............................................................................................................................................
....................................................^.^.^.^.....^.^.^.....^.^.^...^.^.^.^....................................................
.............................................................................................................................................
...................................................^...^...^...^.^...^.^.^.^.^.^.^.^...^.^...................................................
.............................................................................................................................................
..................................................^.^...^.^.^.^...^.^.^...^...^.^...^.^...^..................................................
.............................................................................................................................................
.................................................^.^.^.^.^.^.....^...^.^.^.^.^.^...^...^.^.^.................................................
.............................................................................................................................................
................................................^.^.^.....^.........^.^...^.^.....^.^.^.^.^.^................................................
.............................................................................................................................................
...............................................^...^.^.^.^.^.^...^...^...^.^.^.^.^.....^.^...^...............................................
.............................................................................................................................................
..............................................^.^.^.^...^.^...^.....^.^...^.^...^...^.....^.^.^..............................................
.............................................................................................................................................
.............................................^.^...^...^.^.^.^.^.^...^...^.^...^.....^...^.^.^.^.............................................
.............................................................................................................................................
............................................^.^...^.....^.^.^.^.^.^.^.^...^...^.^.^.^.^.^.^.^.^.^............................................
.............................................................................................................................................
...........................................^...^.^.^.^.^.^.....^...........^.^...^...^.^.^.^.....^...........................................
.............................................................................................................................................
..........................................^.^.....^.^.....^.....^.....^...^.^...^...^.^.^.^.^...^.^..........................................
.............................................................................................................................................
.........................................^.....^.^.^...^.^.^.^.^.^.^.....^...^.^.^...^.^.^.^.^.^.^.^.........................................
.............................................................................................................................................
........................................^...^.^.^...^.^.^.^.^.....^.^.^.^.^...^...^.......^.^.^.^...^........................................
.............................................................................................................................................
.......................................^...^.^.^...^...^.^...^.^.^.^...^.....^.....^...^.^.^.^.^.^.^.^.......................................
.............................................................................................................................................
......................................^.^.^.^.^.^.^.^.^.^...^...^...^.^.^.^.^.^.^.^.^...^.^.^.^...^.^.^......................................
.............................................................................................................................................
.....................................^.^.^...^.^.^.^.^.^.^.^...^.^...^.^...^.^.....^...^.....^.^...^.^.^.....................................
.............................................................................................................................................
....................................^.^.^.^.^.^.^.......^...^.^.^.^.^.^.^.^.^.^.....^.^.^...^.^.^.^.^.^.^....................................
.............................................................................................................................................
...................................^.^.....^...^...^.^.^.^.^...^.^.^.....^.^...^...^.^.........^...^.^.^.^...................................
.............................................................................................................................................
..................................^.^.^.....^.^.^.........^.^.^.^...^.......^...^.^.^.^.^.......^.^.^...^.^..................................
.............................................................................................................................................
.................................^.....^.^.^...^.^.^.^.^.^.^.^.^...^.^.^.^.....^.^...^.^.^.^.^.^.^.^.^.^...^.................................
.............................................................................................................................................
................................^.^.^.^.^.^.^.^.^.^...^.^.^.^.^...^.^.^.^...^.^.^...^.^.^.^.^.^.^.^...^.^.^.^................................
.............................................................................................................................................
...............................^...^.^.....^.........^...^.....^.^.^...^.^.....^.....^.^.^.^.^...^.^.^.^.^.^.^...............................
.............................................................................................................................................
..............................^...^.....^.^.^.^...^.^.^.^.....^.^.^...^...^...^...^.....^.^.^.^.^.^.^.^.^.....^..............................
.............................................................................................................................................
.............................^.^...^.^...^.^.^.^.^.^.^.^...^.....^.^...^.^.^.^.^...^.^.^.^.^.^...^.^.^.^.^...^.^.............................
.............................................................................................................................................
............................^...^.^.^...^.^.^.^.^.^.^.^...^.^...^.^.^...^.^...^.^.^.^.^.^.^.^.^.......^...^.^.^.^............................
.............................................................................................................................................
...........................^.....^...^...^.^.^.^.^.^.^...^.^.........^.^.^.^.^.^.^.^.^.^...^.^.^.^...^.....^.^.^.^...........................
.............................................................................................................................................
..........................^.^.^...^.^.^.^.^.....^...^.^.^...^...^.^.^.^...^.^.^...^.^.^.^.....^.^.....^...^.^.^.^.^..........................
.............................................................................................................................................
.........................^.^.........^.^.....^.^.....^.....^...^.^...^.^...^.^.....^.^.^...^.^.^...^.^...^.^.^...^.^.........................
.............................................................................................................................................
........................^.^.^...^.^.^.^.....^.^.^.....^...^.^.^...^.^.^.....^.^.^...^.^.^.^.....^.^.^...^.^.^.^.^...^........................
.............................................................................................................................................
.......................^...^.^...^.^.^.^.......^.^.^.....^.^.^.^.^.....^.^.^.^.....^.^.^.^.^...^...^.^.^...^...^.^.^.^.......................
.............................................................................................................................................
......................^.^...^.^...^.^.^.^...^...^...^.^.^.^...^.^.^...^...^...^.^.^.^.......^.^...^...^.^...^.^...^.^.^......................
.............................................................................................................................................
.....................^.^.^.^.^.^...^.^.^.^.^.^.^.....^.^...^.^.^.^...^.^.^.^...^.^.^...^.^...^.........^.....^.^...^.^.^.....................
.............................................................................................................................................
....................^.^.^.^...^...^.^...^...^...^.^...^.^...^.^.^.^.^.^.^.^...^.^.^.^.^.....^...^...^...^...^.^.^.......^....................
.............................................................................................................................................
...................^...^.^.^.^.^.^.....^.^...^...^.^.^.........^.^.^.^.^.^.^...^.^.^.^.^.^.^...^.^.^.^.......^.^.^.......^...................
.............................................................................................................................................
..................^.......^...^...^.^.^.^...^.........^...^.^.^.....^.......^...^...^.....^.^.^.^.^.^.^.^...^.^...^.^.^.^.^..................
.............................................................................................................................................
.................^.^.^.^.^.^.^.^.^.....^.^...^.^.^.^...^.^.^...^.^.^...^...^.^...^.^.^.^.^.^.....^.^.^.^.^...^.....^.^...^.^.................
.............................................................................................................................................
................^.^.^.^.^.^.^...^...^.^.^.^...^.....^.^.^...^.^.^.....^.^.^.....^.^...^.^.^.^...^.^.^.^.^.^...^.^.^.^.^.^...^................
.............................................................................................................................................
...............^.^.....^.^.^.^.^.......^.^.^.^.^.^.^...^.^.^.......^.^...^.^...^.^.^.^...^...^.^.^.^...^.^.^...^.^.^.^.....^.^...............
.............................................................................................................................................
..............^...^...^.^.^.^.^.....^.^...^.^.^.^.^.^.^.^...^.....^...^.^.^.....^.^.^.^.....^.^...^.^.^.^.^.^.^.....^.^...^.^.^..............
.............................................................................................................................................
.............^.^.....^.^.^.^.^...^.....^.^.....^.^.^.^...^.^.........^.....^.....^.^...^...^.^.^...^.^.....^.^.^...^.^.^.^.^.^.^.............
.............................................................................................................................................
............^.^...^...^.^.........^.^.^...^.^.^.^.^.^.....^.^...^.^.........^.^...^.....^.^.....^...^.^.^.^.^.^.^.....^.^...^.^.^............
.............................................................................................................................................
...........^...^...^...^.^.^...^...^...^.^.^.^...^.....^...^.^.^.....^.....^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.....^.^.^.^.......^.^...........
.............................................................................................................................................
..........^...^.^...^...^.^.....^...^.^...^.^.^.....^.^.^.^...^.^...^.^.^.^...^...^...^...^.^.^.^.^.^.^...^.^.^.^.....^...^.^.^.^.^..........
.............................................................................................................................................
.........^.^...^.^.^.^...^...^...........^.^...^...^.^...^.^.^.^...^.^.^.^.....^.^.....^.^.^.^...^.^.^.....^...^.^.^.^.^.^.^.^.^...^.........
.............................................................................................................................................
........^...^.^...^.^...^...^.^.^.^.^.^...^.^.....^.^.^.....^.^...^.^.^.....^.....^.^.^.^.^...^.....^...^...^.^.^...^...^...^...^...^........
.............................................................................................................................................
.......^.^.....^...^.^...^.^.^.^.^.^...^.^.^.^.^.^.^.^.......^.^.^.^.^.^.........^...^.^.^.^.........^.^.^.^.^.....^.^.^.^.^.....^.^.^.......
.............................................................................................................................................
......^...^.^.^...^.^.^.^...^.^...^...^.^.^.....^.^.^...^.....^.^.^...^.^.^.....^.^.^.^.^.^.^.^.....^.^.......^.^.^.^.^.^.^.^...^.^...^......
.............................................................................................................................................
.....^.^.......^.^.^.^.^.^...^.^.^...........^.^...^...^.^...^.......^.^.....^...^...^.^.^.....^.^...^...^.^.....^.^.^.^.^.^.^...^.....^.....
.............................................................................................................................................
....^.^.^.^.^.^...^.^...^...........^.....^...^...^.^.^.^.^.^...^.....^.^...^.^.^...^.^...^...^.^.^...^.^...^.^.^...^.^...^...^.^.^.^...^....
.............................................................................................................................................
...^.^...^.^.^.^.^.^.^...^.^.^.^...^.^...^.....^.^.^.^...^.^.....^.^.^.^.^...^.^...^.....^...^...^.....^.^...^.^.........^.^.^...^.^.^.^.^...
.............................................................................................................................................
..^.^.^.....^.^.^.^.^...^.^.^.....^.^.^.^.^.^.^...^.....^.^.....^.^.....^.^...^.......^.^...^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.^..
.............................................................................................................................................
.^.^.^.........^.^.^.....^.^.^.^.^...^.^...^...^.^.^.^.....^...^.^...^.^.^...^.^.....^.....^...^...^...^.^.....^...^.^...^.^.....^.^.^.^.^.^.
.............................................................................................................................................";
